# üîó URL Shortener API (Laravel 12)

RESTful API –¥–ª—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫.

–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π 6-—Å–∏–º–≤–æ–ª—å–Ω—ã–π –∫–æ–¥, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π URL –≤–∏–¥–∞ http://localhost/abcd1e.

---

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

1. –°–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç

```bash
  git clone https://github.com/iogami/test.git
```

2. –í –ø–∞–ø–∫–µ `laravel-api`. –ü–µ—Ä–µ–∏–º–µ–Ω–≤–∞—Ç—å —Ñ–∞–π–ª .env.example –≤ .env

```bash
  cp laravel-api/.env.example laravel-api/.env
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–≤ –ø–∞–ø–∫–µ, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è `docker-compose.yml`)

```bash
  docker compose up -d --build
```

4. –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∞ –≤ –ø–∞–ø–∫–∞—Ö –¥–ª—è cache

```bash
  docker compose exec app bash -c "chown -R www-data:www-data storage bootstrap/cache && chmod -R 775 storage bootstrap/cache"
```


5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Laravel

```bash
  docker compose exec app composer install
```

6. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª—é—á –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
  docker compose exec app php artisan key:generate
```

7. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
  docker compose exec app php artisan migrate
```

---

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:

http://localhost

–ß—Ç–æ–±—ã –ò–∑–º–µ–Ω–∏—Ç—å localhost –≤ `nginx/default.conf`

–ß—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ `myproject.local`), –∏–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:

```bash
  server_name localhost;
```

–Ω–∞:

```bash
  server_name myproject.local;
```

–ó–∞—Ç–µ–º –ø—Ä–æ–ø–∏—à–∏—Ç–µ —ç—Ç–æ—Ç –¥–æ–º–µ–Ω –≤ `/etc/hosts`:

```bash
  127.0.0.1 myproject.local
```

---

## API Endpoint: POST `/api/short-links`

–°–æ–∑–¥–∞—ë—Ç –∫–æ—Ä–æ—Ç–∫—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ URL.  
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥, —Å–æ–∫—Ä–∞—â—ë–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –∏ –¥–∞—Ç—É —Å–æ–∑–¥–∞–Ω–∏—è.

### –ó–∞–≥–æ–ª–æ–≤–∫–∏

```http
Accept: application/json
Content-Type: application/json
```

### –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞

```json
{
    "url": "https://example.com/some-long-page"
}
```

### –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞

```json
{
    "message": "Short link created successfully.",
    "data": {
        "original_url": "https://example.com/some-long-page",
        "short_url": "http://localhost/Ab12Cd",
        "code": "Ab12Cd"
    }
}
```

|–ü–æ–ª–µ   |–û–ø–∏—Å–∞–Ω–∏–µ   |
| ------------ | --------------------------- |
| `short_url`  | –°–æ–∫—Ä–∞—â—ë–Ω–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Å –∫–æ–¥–æ–º  |
| `code`       | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π 6-—Å–∏–º–≤–æ–ª—å–Ω—ã–π –∫–æ–¥ |
| `created_at` | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è       |

### –ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

–ó–∞–ø—Ä–æ—Å:

```json
{
    "url": "not-a-valid-url"
}
```

–û—Ç–≤–µ—Ç:

```json
{
    "message": "Validation error.",
        "errors": {
        "url": [
            "The url field must be a valid URL."
        ]
    }
}
```

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∑–∞–ø—Ä–æ—Å–æ–≤

–õ–∏–º–∏—Ç: 120 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É –Ω–∞ IP

–ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏: –æ—Ç–≤–µ—Ç `429 Too Many Requests`

## API Endpoint: GET `/api/short-links/{code}/stats`

–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Å–æ–∫—Ä–∞—â—ë–Ω–Ω–æ–π —Å—Å—ã–ª–∫–µ.
–≠—Ç–æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Bearer —Ç–æ–∫–µ–Ω–∞.

–î–æ–±–∞–≤—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫:
```http
Authorization: Bearer <–≤–∞—à_—Ç–æ–∫–µ–Ω>
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏
code (string) - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π 6-—Å–∏–º–≤–æ–ª—å–Ω—ã–π –∫–æ–¥ —Å—Å—ã–ª–∫–∏

### –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞

```json
{
    "data": {
        "code": "Ab12Cd",
        "original_url": "https://example.com/some-page",
        "created_at": "2025-05-30T10:12:34.000000Z",
        "visit_count": 42
    }
}
```

### –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

–≠–Ω–¥–ø–æ–∏–Ω—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ POST /api/get-token.

## API Endpoint: POST `/api/get-token`

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç Bearer —Ç–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â—ë–Ω–Ω—ã–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º API.
–≠–Ω–¥–ø–æ–∏–Ω—Ç –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–∫–µ–Ω, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

### –ó–∞–≥–æ–ª–æ–≤–∫–∏

```http
Accept: application/json
```

(—Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

### –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞

```json
{
    "token": "QWErtyUIOP...",
    "token_type": "Bearer"
}
```